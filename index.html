<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Space Invaders - Quiz CientÃ­fico</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #000;
      color: #fff;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
    }

    #gameCanvas {
      background: #000;
      border: 1px solid #0a0;
    }

    #questionBox {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 30, 0, 0.85);
      padding: 10px;
      border: 1px solid #0f0;
      border-radius: 6px;
      text-align: center;
      width: 90%;
      max-width: 500px;
      color: #0f0;
      font-size: 14px;
    }

    #feedback {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 28px;
      font-weight: bold;
      text-align: center;
      opacity: 0;
      pointer-events: none;
      z-index: 10;
    }

    #controls {
      position: absolute;
      bottom: 20px;
      width: 100%;
      display: flex;
      justify-content: space-between;
      padding: 0 20px;
      box-sizing: border-box;
    }

    #analogStick {
      width: 80px;
      height: 80px;
      background: rgba(255,255,255,0.2);
      border-radius: 50%;
      position: relative;
      border: 1px solid #0f0;
      touch-action: none; /* Impede scroll e zoom */
    }

    #stick {
      width: 40px;
      height: 40px;
      background: rgba(0, 255, 255, 0.8);
      border-radius: 50%;
      position: absolute;
      top: 20px;
      left: 20px;
      touch-action: none;
    }

    #fireBtn {
      width: 70px;
      height: 70px;
      background: rgba(0, 255, 0, 0.3);
      border: 1px solid #0f0;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: #0f0;
      user-select: none;
      touch-action: manipulation; /* Melhora desempenho e clique */
    }

    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 20px;
    }

    #gameOver {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.9);
      padding: 20px;
      border: 2px solid red;
      border-radius: 10px;
      text-align: center;
      display: none;
    }

    #finalScore {
      font-size: 24px;
      color: #0f0;
      margin-top: 10px;
    }

    #restartBtn {
      margin-top: 15px;
      padding: 10px 20px;
      background: #0a0;
      border: none;
      color: white;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
    }

    #restartBtn:hover {
      background: #0c0;
    }
  </style>
</head>
<body>
  <div id="score">PontuaÃ§Ã£o: 0</div>
  <div id="questionBox">
    <div id="questionText">Carregando pergunta...</div>
    <div id="optionsText"></div>
  </div>
  <canvas id="gameCanvas" width="400" height="600"></canvas>
  
  <div id="feedback"></div>

  <div id="gameOver">
    <div>ðŸŽ® GAME OVER</div>
    <div id="finalScore">Sua pontuaÃ§Ã£o: 0</div>
    <button id="restartBtn">RecomeÃ§ar</button>
  </div>

  <div id="controls">
    <div id="analogStick">
      <div id="stick"></div>
    </div>
    <div id="fireBtn">ðŸ”«</div>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreDisplay = document.getElementById('score');
    const questionText = document.getElementById('questionText');
    const optionsText = document.getElementById('optionsText');
    const feedbackEl = document.getElementById('feedback');
    const gameOverDisplay = document.getElementById('gameOver');
    const finalScoreDisplay = document.getElementById('finalScore');
    const restartBtn = document.getElementById('restartBtn');
    const stick = document.getElementById('stick');
    const analogStick = document.getElementById('analogStick');
    const fireBtn = document.getElementById('fireBtn');

    // Jogador
    let player = {
      x: canvas.width / 2 - 20,
      y: canvas.height - 40,
      width: 40,
      height: 20,
      speed: 6,
      dx: 0
    };

    let bullets = [];
    const bulletSpeed = 7;

    // Sistema de partÃ­culas para explosÃ£o realista
    let particles = [];

    let enemies = [];
    const letters = ['A', 'B', 'C', 'D', 'E'];

    // ðŸŒŸ BANCO DE PERGUNTAS â€” 35 QUESTÃ•ES DE CIÃŠNCIAS DO 9Âº ANO
    const questions = [
      // Biologia
      { q: "Qual Ã© a principal funÃ§Ã£o da mitocÃ´ndria?", o: ["A) Produzir proteÃ­nas", "B) Armazenar DNA", "C) Produzir energia (ATP)", "D) Controlar a entrada de substÃ¢ncias", "E) Produzir hormÃ´nios"], c: 'C' },
      { q: "O que Ã© um ecossistema?", o: ["A) Um grupo de animais", "B) Somente plantas", "C) Conjunto de seres vivos e seu ambiente", "D) Apenas fatores abiÃ³ticos", "E) Somente solo e Ã¡gua"], c: 'C' },
      { q: "Qual Ã© a unidade bÃ¡sica da vida?", o: ["A) CÃ©lula", "B) Tecido", "C) Ã“rgÃ£o", "D) Sistema", "E) Organismo"], c: 'A' },
      { q: "Qual processo permite Ã s plantas produzirem seu prÃ³prio alimento?", o: ["A) RespiraÃ§Ã£o", "B) DigestÃ£o", "C) FotossÃ­ntese", "D) FermentaÃ§Ã£o", "E) TranspiraÃ§Ã£o"], c: 'C' },
      { q: "Em qual Ã³rgÃ£o do corpo humano ocorre a maior parte da digestÃ£o dos alimentos?", o: ["A) EstÃ´mago", "B) FÃ­gado", "C) Intestino delgado", "D) Intestino grosso", "E) EsÃ´fago"], c: 'C' },
      { q: "Qual Ã© a funÃ§Ã£o dos glÃ³bulos vermelhos?", o: ["A) Defender o corpo", "B) Coagular o sangue", "C) Transportar oxigÃªnio", "D) Produzir anticorpos", "E) Regular a temperatura"], c: 'C' },
      { q: "O que Ã© hereditariedade?", o: ["A) A capacidade de se adaptar ao ambiente", "B) A transmissÃ£o de caracterÃ­sticas dos pais para os filhos", "C) O processo de mutaÃ§Ã£o genÃ©tica", "D) A formaÃ§Ã£o de novas espÃ©cies", "E) A reproduÃ§Ã£o assexuada"], c: 'B' },
      { q: "Qual Ã© o principal gÃ¡s responsÃ¡vel pelo efeito estufa?", o: ["A) OxigÃªnio", "B) NitrogÃªnio", "C) DiÃ³xido de carbono", "D) HidrogÃªnio", "E) Metano"], c: 'C' },
      { q: "Como se chama o processo em que plantas perdem Ã¡gua na forma de vapor?", o: ["A) EvaporaÃ§Ã£o", "B) CondensaÃ§Ã£o", "C) TranspiraÃ§Ã£o", "D) FotossÃ­ntese", "E) RespiraÃ§Ã£o"], c: 'C' },
      { q: "Qual Ã© o papel dos decompositores na cadeia alimentar?", o: ["A) Produzir alimento", "B) Consumir produtores", "C) Degradar matÃ©ria orgÃ¢nica morta", "D) Capturar luz solar", "E) Produzir oxigÃªnio"], c: 'C' },

      // QuÃ­mica
      { q: "Qual Ã© a fÃ³rmula quÃ­mica da Ã¡gua?", o: ["A) H2O2", "B) HO", "C) H2O", "D) H3O", "E) OH2"], c: 'C' },
      { q: "O que Ã© uma ligaÃ§Ã£o iÃ´nica?", o: ["A) Compartilhamento de elÃ©trons", "B) Troca de elÃ©trons entre Ã¡tomos", "C) AtraÃ§Ã£o entre molÃ©culas polares", "D) LigaÃ§Ã£o por forÃ§as de Van der Waals", "E) LigaÃ§Ã£o por prÃ³tons"], c: 'B' },
      { q: "Qual Ã© o sÃ­mbolo quÃ­mico do ouro?", o: ["A) Ag", "B) Fe", "C) Au", "D) Cu", "E) Pb"], c: 'C' },
      { q: "O que acontece quando um Ã¡cido reage com uma base?", o: ["A) Forma-se um gÃ¡s", "B) Forma-se um sal e Ã¡gua", "C) Libera calor sem reaÃ§Ã£o", "D) Forma-se um metal", "E) NÃ£o ocorre reaÃ§Ã£o"], c: 'B' },
      { q: "Qual Ã© o estado fÃ­sico do mercÃºrio Ã  temperatura ambiente?", o: ["A) SÃ³lido", "B) LÃ­quido", "C) Gasoso", "D) Plasma", "E) Cristalino"], c: 'B' },
      { q: "O que Ã© uma substÃ¢ncia pura?", o: ["A) Mistura de dois ou mais elementos", "B) SubstÃ¢ncia com composiÃ§Ã£o fixa e propriedades definidas", "C) SoluÃ§Ã£o aquosa", "D) Mistura heterogÃªnea", "E) Elemento radioativo"], c: 'B' },
      { q: "Qual Ã© o nÃºmero atÃ´mico do oxigÃªnio?", o: ["A) 6", "B) 8", "C) 16", "D) 14", "E) 12"], c: 'B' },
      { q: "O que caracteriza uma reaÃ§Ã£o quÃ­mica?", o: ["A) MudanÃ§a de estado fÃ­sico", "B) FormaÃ§Ã£o de novas substÃ¢ncias", "C) AlteraÃ§Ã£o de temperatura", "D) MudanÃ§a de cor sem transformaÃ§Ã£o", "E) Apenas mudanÃ§a de volume"], c: 'B' },
      { q: "Qual Ã© a fÃ³rmula do gÃ¡s carbÃ´nico?", o: ["A) CO", "B) CO2", "C) C2O", "D) H2CO3", "E) O2C"], c: 'B' },
      { q: "O que Ã© uma soluÃ§Ã£o Ã¡cida?", o: ["A) Tem pH maior que 7", "B) Tem pH igual a 7", "C) Tem pH menor que 7", "D) NÃ£o conduz eletricidade", "E) Ã‰ sempre lÃ­quida"], c: 'C' },

      // FÃ­sica
      { q: "Qual Ã© a unidade de medida da forÃ§a no Sistema Internacional?", o: ["A) Joule", "B) Pascal", "C) Newton", "D) Watt", "E) Volt"], c: 'C' },
      { q: "O que Ã© inÃ©rcia?", o: ["A) A forÃ§a que freia um objeto", "B) A tendÃªncia de um corpo manter seu estado de repouso ou movimento", "C) A aceleraÃ§Ã£o de um corpo", "D) A gravidade da Terra", "E) A resistÃªncia do ar"], c: 'B' },
      { q: "Qual Ã© a velocidade da luz no vÃ¡cuo?", o: ["A) 300.000 km/h", "B) 30.000 km/s", "C) 300.000 km/s", "D) 3.000 km/s", "E) 3.000 m/s"], c: 'C' },
      { q: "O que Ã© energia potencial gravitacional?", o: ["A) Energia de movimento", "B) Energia armazenada por causa da posiÃ§Ã£o em um campo gravitacional", "C) Energia do calor", "D) Energia elÃ©trica", "E) Energia sonora"], c: 'B' },
      { q: "Qual Ã© a lei que diz que a aÃ§Ã£o e a reaÃ§Ã£o tÃªm mesma intensidade e direÃ§Ã£o, mas sentidos opostos?", o: ["A) Lei da GravitaÃ§Ã£o Universal", "B) Primeira Lei de Newton", "C) Segunda Lei de Newton", "D) Terceira Lei de Newton", "E) Lei de Ohm"], c: 'D' },
      { q: "O que Ã© corrente elÃ©trica?", o: ["A) A diferenÃ§a de potencial", "B) O fluxo de elÃ©trons em um condutor", "C) A resistÃªncia de um material", "D) A quantidade de carga em repouso", "E) A potÃªncia elÃ©trica"], c: 'B' },
      { q: "Qual Ã© a unidade de medida da energia?", o: ["A) Watt", "B) Volt", "C) Joule", "D) AmpÃ¨re", "E) Ohm"], c: 'C' },
      { q: "O que Ã© uma onda mecÃ¢nica?", o: ["A) Onda que nÃ£o precisa de meio para se propagar", "B) Onda que se propaga apenas no vÃ¡cuo", "C) Onda que precisa de um meio material para se propagar", "D) Onda eletromagnÃ©tica", "E) Onda de luz"], c: 'C' },
      { q: "O que acontece com a pressÃ£o em um lÃ­quido quando aumentamos a profundidade?", o: ["A) Diminui", "B) Permanece constante", "C) Aumenta", "D) Varia aleatoriamente", "E) Se torna zero"], c: 'C' },
      { q: "Qual Ã© a fÃ³rmula da energia cinÃ©tica?", o: ["A) E = mgh", "B) E = mcÂ²", "C) E = Â½mvÂ²", "D) E = F Ã— d", "E) E = qV"], c: 'C' },

      // CiÃªncias da Terra
      { q: "Qual Ã© a camada da Terra onde ocorrem os terremotos?", o: ["A) NÃºcleo", "B) Manto", "C) Crosta", "D) Atmosfera", "E) Hidrosfera"], c: 'C' },
      { q: "O que Ã© a erosÃ£o?", o: ["A) FormaÃ§Ã£o de montanhas", "B) AcÃºmulo de sedimentos", "C) Desgaste e transporte de rochas e solos", "D) Vulcanismo", "E) FormaÃ§Ã£o de fossÃ©is"], c: 'C' },
      { q: "Qual Ã© o principal gÃ¡s da atmosfera terrestre?", o: ["A) OxigÃªnio", "B) DiÃ³xido de carbono", "C) NitrogÃªnio", "D) ArgÃ´nio", "E) HidrogÃªnio"], c: 'C' },
      { q: "O que Ã© o ciclo da Ã¡gua?", o: ["A) A transformaÃ§Ã£o de Ã¡gua em vapor", "B) O movimento contÃ­nuo da Ã¡gua entre os oceanos, atmosfera e terra", "C) A precipitaÃ§Ã£o de chuva", "D) A filtraÃ§Ã£o da Ã¡gua no solo", "E) A evaporaÃ§Ã£o somente"], c: 'B' },
      { q: "O que causa as estaÃ§Ãµes do ano?", o: ["A) A rotaÃ§Ã£o da Terra", "B) A mudanÃ§a na distÃ¢ncia da Terra ao Sol", "C) A inclinaÃ§Ã£o do eixo da Terra e sua translaÃ§Ã£o", "D) A atividade solar", "E) A gravidade da Lua"], c: 'C' }
    ];

    let score = 0;
    let currentQuestion = null;
    let gameRunning = true;

    // Mostrar feedback
    function showFeedback(text, color = '#fff') {
      feedbackEl.textContent = text;
      feedbackEl.style.color = color;
      feedbackEl.style.opacity = '1';
      setTimeout(() => {
        feedbackEl.style.opacity = '0';
      }, 1200);
    }

    // Criar explosÃ£o realista com partÃ­culas
    function createExplosion(x, y) {
      const colors = ['#ff9000', '#ff5500', '#ff2200', '#ffffff', '#ffcc00'];
      const particleCount = 80;

      for (let i = 0; i < particleCount; i++) {
        const angle = Math.random() * Math.PI * 2;
        const speed = Math.random() * 4 + 1;
        const size = Math.random() * 4 + 1;
        const life = Math.random() * 60 + 30;

        particles.push({
          x: x,
          y: y,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          radius: size,
          color: colors[Math.floor(Math.random() * colors.length)],
          life: life,
          maxLife: life
        });
      }
    }

    // Atualizar partÃ­culas
    function updateParticles() {
      for (let i = particles.length - 1; i >= 0; i--) {
        const p = particles[i];
        p.x += p.vx;
        p.y += p.vy;
        p.vy += 0.05;
        p.life--;

        if (p.life <= 0) {
          particles.splice(i, 1);
        }
      }
    }

    // Desenhar partÃ­culas
    function drawParticles() {
      for (const p of particles) {
        const alpha = p.life / p.maxLife;
        ctx.globalAlpha = alpha;
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
        ctx.fill();
      }
      ctx.globalAlpha = 1;
    }

    // Nave com asas
    function drawPlayer() {
      ctx.fillStyle = '#0af';
      ctx.beginPath();
      ctx.moveTo(player.x + player.width / 2, player.y);
      ctx.lineTo(player.x, player.y + player.height);
      ctx.lineTo(player.x + player.width, player.y + player.height);
      ctx.closePath();
      ctx.fill();

      ctx.beginPath();
      ctx.moveTo(player.x, player.y + player.height - 5);
      ctx.lineTo(player.x - 10, player.y + player.height + 10);
      ctx.lineTo(player.x, player.y + player.height);
      ctx.closePath();
      ctx.fill();

      ctx.beginPath();
      ctx.moveTo(player.x + player.width, player.y + player.height - 5);
      ctx.lineTo(player.x + player.width + 10, player.y + player.height + 10);
      ctx.lineTo(player.x + player.width, player.y + player.height);
      ctx.closePath();
      ctx.fill();
    }

    function loadQuestion() {
      const q = questions[Math.floor(Math.random() * questions.length)];
      currentQuestion = q;
      questionText.textContent = q.q;
      optionsText.innerHTML = q.o.join('<br>');
    }

    function spawnEnemies() {
      enemies = [];
      for (let i = 0; i < 5; i++) {
        enemies.push({
          x: 30 + i * 70,
          y: Math.random() * 100,
          width: 30,
          height: 30,
          speedX: (Math.random() - 0.5) * 2,
          speedY: 0.4 + Math.random() * 0.3,
          letter: letters[i]
        });
      }
    }

    function drawBullets() {
      for (let b of bullets) {
        ctx.fillStyle = '#0f0';
        ctx.beginPath();
        ctx.arc(b.x, b.y, 3, 0, Math.PI * 2);
        ctx.fill();
        ctx.strokeStyle = '#0ff';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(b.x, b.y);
        ctx.lineTo(b.x, b.y + 12);
        ctx.stroke();
      }
    }

    function drawEnemy(e) {
      ctx.fillStyle = '#0a0';
      ctx.beginPath();
      ctx.arc(e.x + e.width / 2, e.y + e.height / 2, e.width / 2, 0, Math.PI * 2);
      ctx.fill();

      ctx.strokeStyle = '#0a0';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(e.x + e.width / 3, e.y + e.height / 3);
      ctx.lineTo(e.x + e.width / 3 - 6, e.y + e.height / 4 - 4);
      ctx.moveTo(e.x + 2 * e.width / 3, e.y + e.height / 3);
      ctx.lineTo(e.x + 2 * e.width / 3 + 6, e.y + e.height / 4 - 4);
      ctx.stroke();

      ctx.fillStyle = '#000';
      ctx.beginPath();
      ctx.arc(e.x + e.width / 3, e.y + e.height / 3, 4, 0, Math.PI * 2);
      ctx.arc(e.x + 2 * e.width / 3, e.y + e.height / 3, 4, 0, Math.PI * 2);
      ctx.fill();

      ctx.beginPath();
      ctx.moveTo(e.x + e.width / 4, e.y + 2 * e.height / 3);
      ctx.lineTo(e.x + 3 * e.width / 4, e.y + 2 * e.height / 3);
      ctx.stroke();

      ctx.font = 'bold 14px Arial';
      ctx.fillStyle = '#fff';
      ctx.textAlign = 'center';
      ctx.fillText(e.letter, e.x + e.width / 2, e.y + e.height / 2 + 5);
    }

    function updatePlayer() {
      player.x += player.dx;
      if (player.x < 0) player.x = 0;
      if (player.x + player.width > canvas.width) player.x = canvas.width - player.width;
    }

    function updateBullets() {
      for (let i = bullets.length - 1; i >= 0; i--) {
        bullets[i].y -= bulletSpeed;
        if (bullets[i].y < 0) bullets.splice(i, 1);
      }
    }

    function updateEnemies() {
      for (let e of enemies) {
        e.x += e.speedX;
        if (e.x <= 0 || e.x + e.width >= canvas.width) e.speedX *= -1;
        if (e.y < player.y) e.y += e.speedY;

        if (
          e.x < player.x + player.width &&
          e.x + e.width > player.x &&
          e.y < player.y + player.height &&
          e.y + e.height > player.y
        ) {
          createExplosion(player.x + player.width / 2, player.y + player.height / 2);
          showFeedback("Errado! Fim de jogo.", 'red');
          setTimeout(endGame, 600);
        }
      }
    }

    function detectCollisions() {
      for (let b of bullets) {
        for (let i = enemies.length - 1; i >= 0; i--) {
          let e = enemies[i];
          if (
            b.x < e.x + e.width &&
            b.x + 3 > e.x &&
            b.y < e.y + e.height &&
            b.y + 12 > e.y
          ) {
            bullets.splice(bullets.indexOf(b), 1);
            createExplosion(e.x + e.width / 2, e.y + e.height / 2);

            if (e.letter === currentQuestion.c) {
              showFeedback("Correto!", '#0f0');
              score += 100;
              scoreDisplay.textContent = `PontuaÃ§Ã£o: ${score}`;
              setTimeout(() => {
                loadQuestion();
                spawnEnemies();
              }, 600);
            } else {
              showFeedback("Errado! Fim de jogo.", 'red');
              setTimeout(endGame, 600);
            }
          }
        }
      }
    }

    function endGame() {
      gameRunning = false;
      finalScoreDisplay.textContent = `Sua pontuaÃ§Ã£o: ${score}`;
      gameOverDisplay.style.display = 'block';
    }

    function resetGame() {
      player.x = canvas.width / 2 - 20;
      bullets = [];
      particles = [];
      score = 0;
      scoreDisplay.textContent = 'PontuaÃ§Ã£o: 0';
      gameOverDisplay.style.display = 'none';
      gameRunning = true;
      loadQuestion();
      spawnEnemies();
      gameLoop();
    }

    function gameLoop() {
      if (!gameRunning) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      drawPlayer();
      drawBullets();
      enemies.forEach(drawEnemy);
      drawParticles();

      updatePlayer();
      updateBullets();
      updateEnemies();
      detectCollisions();
      updateParticles();

      requestAnimationFrame(gameLoop);
    }

    // === CONTROLES ANALÃ“GICOS ===
    let analogActive = false;
    let analogOrigin = { x: 0, y: 0 };
    let analogCurrent = { x: 0, y: 0 };

    function handleAnalogStart(e) {
      e.preventDefault(); // Impede scroll e zoom
      const rect = analogStick.getBoundingClientRect();
      analogOrigin = {
        x: rect.left + rect.width / 2,
        y: rect.top + rect.height / 2
      };
      analogActive = true;
      updateAnalog(e);
    }

    function handleAnalogMove(e) {
      if (!analogActive) return;
      e.preventDefault();
      updateAnalog(e);
    }

    function handleAnalogEnd() {
      analogActive = false;
      stick.style.transform = 'translate(0, 0)';
      player.dx = 0;
    }

    function updateAnalog(e) {
      const touch = e.touches ? e.touches[0] : e;
      const dx = touch.clientX - analogOrigin.x;
      const dy = touch.clientY - analogOrigin.y;
      const distance = Math.min(35, Math.sqrt(dx * dx + dy * dy)); // MÃ¡ximo de 35px
      const angle = Math.atan2(dy, dx);

      const limitedX = Math.cos(angle) * distance;
      const limitedY = Math.sin(angle) * distance;

      stick.style.transform = `translate(${limitedX}px, ${limitedY}px)`;
      player.dx = limitedX * 0.3; // Sensibilidade ajustada
    }

    analogStick.addEventListener('touchstart', handleAnalogStart);
    window.addEventListener('touchmove', handleAnalogMove);
    window.addEventListener('touchend', handleAnalogEnd);

    // === BOTÃƒO DE TIRO ===
    function shoot() {
      if (!gameRunning) return;
      bullets.push({ x: player.x + player.width / 2, y: player.y });
    }

    // Garantir que o botÃ£o funcione em iOS e Android
    fireBtn.addEventListener('touchstart', e => {
      e.preventDefault();
      shoot();
    });

    fireBtn.addEventListener('click', e => {
      e.preventDefault();
      shoot();
    });

    // === BOTÃƒO DE RECOMEÃ‡AR ===
    restartBtn.addEventListener('click', resetGame);

    // Iniciar jogo
    loadQuestion();
    spawnEnemies();
    gameLoop();
  </script>
</body>
</html>